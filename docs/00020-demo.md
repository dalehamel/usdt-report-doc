# tracing tools

To get real value out of this gem, you're going to want to familiarize yourself with a tracing tool that it works with. There are a lot of resources available (see below) for these if you want to know more about them, but we'll demonstrate some basic uses here.

## dtrace

In development, dtrace comes with OS X and can be used out-of-the-box, and can also be used in certain BSD production environments. For the discussion here, the focus will be mostly on `dtrace` on OS X.

When you run dtrace, it will complain about system integrity protection (SIP), which is an important security feature of OS X. Luckily, it doesn't get in the way of how we implement probes here so the warning can be ignored.

You do, still, need to run dtrace as root, so have your `sudo` password ready.

dtrace can run commands specified by a string with the `-n` flag, or run script files (conventionally ending in `.dt`), with the `-s` flag.

[@dtrace-osx-manpage]

## bpftrace

bpftrace [@bpftrace] is an emerging new tool that is based on eBPF support added to version 4.1 of the linux kernel. While rapidly under development, it already supports much of dtrace's functionality.

You can use bpftrace in production systems to attach to and summarize data from trace points similarly to with dtrace.

Like dtrace, you can run bpftrace programs by specifying a string with the `-e` flag, or by running a bpftrace script (conventionally ending in `.bt`) directly.

dtrace scripts can often be easily converted to bpftrace scripts see this cheatsheet [@bgregg-dtrace-for-linux].

For more details for bpftrace, check out its own reference guide [@bpftrace-reference-guide] and this great article [@joyful-bikeshedding-bpftrace].
