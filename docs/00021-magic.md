# The magic sauce

Normally, static probes should be defined in source code, usually in a C program.

They register a provider (basically a namespace), and a probe name, as well as a description of the data type
for the probe.

This is great for something like the Ruby VM, where probe points can (and are) be built right into the source code.

For the ruby language itself, however, we need to be clever in order to register tracepoints in ruby-land.

In libstapsdt, this is achieved by creating an ELF binary on-the-fly for each provider, and registering tracepoints against this stubbed out shared library.

Any dynamic language just needs to `dlopen` this shared library, and it should be able to expose a number of static tracepoints.

This contains the provider and probe name, as well as the address of the probe and the arguments it specifies.

The python helper will `dlopen` this library, adding these probes to its process image when it pulls in these stub libraries.
